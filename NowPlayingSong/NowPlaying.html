<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="./config.js"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <script>
            function pullData(user,apikey)
            {
                const website="https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+user+"&api_key="+apikey+"&format=json&limit=1"
                fetch(website)
                .then((response) => {
                    if (!response.ok){
                        throw new Error("Unable to Find Tracks")
                    }
                        return response.json();
                    })
                .then((json) => showSong(json));
            }

            function showSong(json)
            {
                document.getElementById("art").setAttribute("src",json.recenttracks.track[0].image[0]['#text']);
                document.getElementById("song").innerHTML = json.recenttracks.track[0].name;
                document.getElementById("by").innerHTML = "by";
                document.getElementById("artist").innerHTML = json.recenttracks.track[0].artist['#text'];
                document.getElementById("from").innerHTML = "from";
                document.getElementById("album").innerHTML = json.recenttracks.track[0].album['#text'];
            }
            $(document).ready(function()
            {
                setInterval(function() {
                    pullData(config.LastfmUsername,config.LastfmApiKey)
                }, 1000);
            });
        </script>
        <div id="root">
            <div id="part1">
                <div id="artcontainer"><img id="art" src="" alt="Album Art" width="100" height="100" /></div>
            </div>
            <div id="part2">
                <div id="textcontainer1">
                    <div id="song"></div> 
                </div>
                <div id="textcontainer2">
                    <div id="by"></div> 
                    <div id="artist"></div>
                </div>
                <div id="textcontainer3">
                    <div id="from"></div> 
                    <div id="album"></div>
                </div>
            </div>
        </div>
    </body>
</html>