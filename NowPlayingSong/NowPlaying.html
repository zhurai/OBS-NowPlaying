<html>
    <head>
        <script src="./config.js"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <script>
            function pullData(user,apikey)
            {
                const website="https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+user+"&api_key="+apikey+"&format=json&limit=1"
                fetch(website)
                .then((response) => {
                    if (!response.ok){
                        throw new Error("Unable to Find Tracks")
                    }
                        return response.json();
                    })
                .then((json) => showSong(json));
            }

            function showSong(json)
            {
                document.getElementById("song").innerHTML = json.recenttracks.track[0].name;
                document.getElementById("artist").innerHTML = json.recenttracks.track[0].artist['#text'];
            }

            const interval = setInterval(function() {
                pullData()
            },30000);
            
            pullData(config.LastfmUsername,config.LastfmApiKey)
        </script>
        <div id="container">
            <div id="song">test</div> 
            <div id="by">by</div> 
            <div id="artist">test</div>
        </div>
    </body>
</html>