<html>
    <head>
        <meta http-equiv="refresh" content="30">
        <script src="./config.js"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <script>
            function pullData(user,apikey)
            {
                const website="https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+user+"&api_key="+apikey+"&format=json&limit=1"
                fetch(website)
                .then((response) => {
                    if (!response.ok){
                        throw new Error("Unable to Find Tracks")
                    }
                        return response.json();
                    })
                .then((json) => showSong(json));
            }

            function showSong(json)
            {
                document.getElementById("song").innerHTML = json.recenttracks.track[0].name;
                document.getElementById("by").innerHTML = "by";
                document.getElementById("artist").innerHTML = json.recenttracks.track[0].artist['#text'];
                document.getElementById("from").innerHTML = "from";
                document.getElementById("album").innerHTML = json.recenttracks.track[0].album['#text'];
            }
            
            pullData(config.LastfmUsername,config.LastfmApiKey)
        </script>
        <div id="container1">
            <div id="song"></div> 
            <div id="by"></div> 
            <div id="artist"></div>
        </div>
        <div id="container2">
            <div id="from"></div> 
            <div id="album"></div>
        </div>
    </body>
</html>